# Architect â†’ QA Handover: Best Practices

> **Purpose**: æ ‡å‡†åŒ–Architectå®Œæˆè®¾è®¡åå‘QAä¼ é€’æµ‹è¯•éœ€æ±‚çš„æµç¨‹  
> **Audience**: Architect Agent, QA Engineer Agent, Project Leads

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

**QAä¸èƒ½ç­‰Developerå®ç°å®Œæ‰å¼€å§‹å‡†å¤‡**ã€‚éœ€è¦ï¼š
1. âœ… è®¾è®¡é˜¶æ®µå°±è·å¾—æµ‹è¯•æ¸…å•
2. âœ… ç†è§£ç³»ç»Ÿæ¶æ„å’Œå…³é”®è·¯å¾„
3. âœ… æ˜ç¡®æµ‹è¯•éªŒæ”¶æ ‡å‡†
4. âœ… æå‰è¯†åˆ«æµ‹è¯•éš¾ç‚¹

---

## ğŸ“‹ æ ‡å‡†äº¤æ¥æµç¨‹

### Step 1: Architectåˆ›å»ºæµ‹è¯•è§„æ ¼

**æ–‡ä»¶ä½ç½®**: `docs/agents/sessions/qa/0xXX-test-checklist.md`

**å¿…éœ€å†…å®¹**:
```markdown
# 0xXX [Feature Name] QA Test Checklist

> **Status**: ğŸ“‹ READY FOR QA  
> **Author**: Architect Team  
> **Date**: YYYY-MM-DD

---

## æµ‹è¯•æ¦‚è¿°

**è®¾è®¡ç›®æ ‡**: [ONE SENTENCE - è¿™ä¸ªåŠŸèƒ½è¦åšä»€ä¹ˆ]

**å…³é”®è´¨é‡å±æ€§**:
| å±æ€§ | ç›®æ ‡ | æµ‹è¯•æ–¹æ³• |
|------|------|---------|
| Performance | 100K TPS | å‹åŠ›æµ‹è¯• |
| Reliability | 99.99% | æ•…éšœæ³¨å…¥ |
| Correctness | 100% | æ•°æ®æ¯”å¯¹ |

---

## Phase X: [Component Name]

### Test X.1: [Test Category]

#### Test X.1.1: [Specific Test]
- [ ] **Precondition**: [æµ‹è¯•å‰ç½®æ¡ä»¶]
- [ ] **Action**: [æ‰§è¡Œçš„æ“ä½œ]
- [ ] **Expected**: [æœŸæœ›çš„ç»“æœ]

**éªŒè¯æ–¹æ³•**:
\`\`\`bash
cargo test xxx_test
# æˆ–
./scripts/test_xxx.sh
\`\`\`

#### Test X.1.2: [Another Test]
...

---

## å…³é”®æµ‹è¯•åœºæ™¯

### Happy Path
- [ ] æ­£å¸¸æµç¨‹åº”è¯¥é€šè¿‡

### Error Handling
- [ ] é”™è¯¯åº”è¯¥è¢«æ­£ç¡®å¤„ç†
- [ ] é”™è¯¯ä¿¡æ¯åº”è¯¥æ˜ç¡®

### Edge Cases
- [ ] è¾¹ç•Œå€¼: 0, è´Ÿæ•°, æœ€å¤§å€¼
- [ ] ç©ºå€¼: None, ç©ºåˆ—è¡¨
- [ ] å¹¶å‘: å¤šçº¿ç¨‹ç«äº‰

### Failure Scenarios
- [ ] ç»„ä»¶crashåæ¢å¤
- [ ] ç½‘ç»œæ–­å¼€åé‡è¿
- [ ] æ•°æ®æŸååæ£€æµ‹

---

## éªŒæ”¶æ ‡å‡†æ€»ç»“

### åŠŸèƒ½éªŒæ”¶
- [ ] æ‰€æœ‰Phaseæµ‹è¯•é€šè¿‡
- [ ] æ— P0/P1 bug

### æ€§èƒ½éªŒæ”¶
- [ ] [å…·ä½“æ€§èƒ½æŒ‡æ ‡]

### è¦†ç›–ç‡è¦æ±‚
- [ ] å•å…ƒæµ‹è¯• > 80%
- [ ] E2Eè¦†ç›–å…³é”®è·¯å¾„

---

## æµ‹è¯•å·¥å…·/è„šæœ¬å»ºè®®

| å·¥å…· | ç”¨é€” |
|------|------|
| `cargo test` | å•å…ƒæµ‹è¯• |
| `scripts/test_xxx_e2e.sh` | E2Eæµ‹è¯• |
| `scripts/inject_orders.py` | æ•°æ®æ³¨å…¥ |

---

## é¢„è®¡æµ‹è¯•å·¥ä½œé‡

| Phase | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|-------|-------|--------|
| Phase 1 | 2-3 days | P0 |
| Phase 2 | 3-5 days | P0 |
| Phase 3 | 1-2 days | P1 |

**Total**: X-Y days
```

---

### Step 2: åˆ›å»ºäº¤æ¥æ–‡æ¡£

**æ–‡ä»¶ä½ç½®**: `docs/agents/sessions/shared/arch-to-qa-handover.md`

**å¿…éœ€å†…å®¹**:
```markdown
# Architect â†’ QA: [Feature Name] Test Requirements

## ğŸ“¦ äº¤ä»˜ç‰©

- [x] Test Checklist: `docs/agents/sessions/qa/0xXX-test-checklist.md`
- [x] Architecture Overview: `docs/agents/sessions/architect/0xXX-*.md`
- [x] Key Test Scenarios: [è§ä¸‹æ–‡]

## ğŸ¯ æµ‹è¯•ç›®æ ‡

**ONE SENTENCE**: [è¿™ä¸ªåŠŸèƒ½çš„æµ‹è¯•ç›®æ ‡]

## ğŸ”‘ å…³é”®æµ‹è¯•åœºæ™¯

### å¿…é¡»æµ‹è¯• (P0)
1. [åœºæ™¯1]: [æè¿° + é¢„æœŸç»“æœ]
2. [åœºæ™¯2]: [æè¿° + é¢„æœŸç»“æœ]

### åº”è¯¥æµ‹è¯• (P1)
1. [åœºæ™¯1]: [æè¿°]

### å¯ä»¥æµ‹è¯• (P2)
1. [åœºæ™¯1]: [æè¿°]

## âš ï¸ æµ‹è¯•éš¾ç‚¹é¢„è­¦

| éš¾ç‚¹ | åŸå›  | å»ºè®®æ–¹æ³• |
|------|------|---------|
| [éš¾ç‚¹1] | [ä¸ºä»€ä¹ˆéš¾] | [å»ºè®®æ€ä¹ˆæµ‹] |

## ğŸ“ æµ‹è¯•æ•°æ®å»ºè®®

- ä½¿ç”¨`fixtures/orders.csv`ä½œä¸ºåŸºç¡€æ•°æ®
- éœ€è¦åˆ›å»ºçš„æµ‹è¯•æ•°æ®: [åˆ—è¡¨]

## ğŸ”— ç›¸å…³æ–‡æ¡£

- Architecture Design: [link]
- Implementation Plan: [link] (for timeline reference)

## ğŸ“ Ready for Test Planning

Architectç­¾å: @Architect AI  
Date: YYYY-MM-DD  
Status: âœ… Ready for QA review
```

---

### Step 3: QAæ¥æ”¶å¹¶åˆ›å»ºæµ‹è¯•è®¡åˆ’

**QAå·¥ä½œæµ**:

#### 3.1 å®¡æŸ¥æµ‹è¯•æ¸…å•
```bash
# é˜…è¯»æµ‹è¯•æ¸…å•
cat docs/agents/sessions/qa/0xXX-test-checklist.md

# æ£€æŸ¥è¦†ç›–ç‡
âœ… Happy path covered?
âœ… Error paths covered?
âœ… Edge cases covered?
âœ… Failure scenarios covered?
```

#### 3.2 è¡¥å……QAè§†è§’çš„æµ‹è¯•
```markdown
## QAè¡¥å……æµ‹è¯•åœºæ™¯

### Architectæœªè¦†ç›–çš„åœºæ™¯
- [ ] [QAè¯†åˆ«çš„é¢å¤–åœºæ™¯1]
- [ ] [QAè¯†åˆ«çš„é¢å¤–åœºæ™¯2]

### å®‰å…¨æµ‹è¯•
- [ ] [å®‰å…¨ç›¸å…³æµ‹è¯•]

### å‹åŠ›æµ‹è¯•
- [ ] [æ€§èƒ½è¾¹ç•Œæµ‹è¯•]
```

#### 3.3 åˆ›å»ºç¡®è®¤æ–‡æ¡£
**æ–‡ä»¶**: `docs/agents/sessions/qa/0xXX-qa-ack.md`

```markdown
# QA Acknowledgment: [Feature Name]

## ğŸ“‹ æµ‹è¯•æ¸…å•éªŒæ”¶

- [x] Test Checklistå·²é˜…è¯»
- [x] Architectureå·²ç†è§£
- [x] Test scenariosè®¤åŒ/å·²è¡¥å……
- [ ] æœ‰ç–‘é—®éœ€è¦æ¾„æ¸… (è§ä¸‹)

## â“ é—®é¢˜/æ¾„æ¸…

| é—®é¢˜ | ä½ç½® | éœ€è¦ä¿¡æ¯ |
|------|------|---------|
| [é—®é¢˜] | [æ–‡ä»¶] | [éœ€è¦ä»€ä¹ˆ] |

## ğŸ“Š QAè¡¥å……æµ‹è¯•

- [ ] [è¡¥å……åœºæ™¯1]
- [ ] [è¡¥å……åœºæ™¯2]

## âœ… Ready for Testing

QAç­¾å: @QA Engineer AI  
Date: YYYY-MM-DD  
Status: âœ… Ready when Developer delivers
```

---

## ğŸ”„ å®Œæ•´äº¤æ¥æµç¨‹å›¾

```
Architectå®Œæˆè®¾è®¡
        â†“
åˆ›å»º 0xXX-test-checklist.md
        â†“
åˆ›å»º arch-to-qa-handover.md
        â†“
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        â†“
QAè¯»å–æµ‹è¯•æ¸…å•
        â†“
ç†è§£æ¶æ„å’Œæµ‹è¯•åœºæ™¯
        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æµ‹è¯•åœºæ™¯è¶³å¤Ÿ?   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
   YES               NO
    â”‚                 â”‚
    â†“                 â†“
åˆ›å»ºqa-ack.md     è¡¥å……æµ‹è¯•åœºæ™¯
    â”‚                 â”‚
    â†“                 â””â”€â”€â†’ åé¦ˆç»™Architect â†’ æ›´æ–°checklist
ç­‰å¾…Developeräº¤ä»˜
    â”‚
    â†“
å¼€å§‹æ‰§è¡Œæµ‹è¯• (æ”¶åˆ°dev-to-qa-handoverå)
```

---

## ğŸ“ æ–‡ä»¶ç»„ç»‡ç»“æ„

```
docs/agents/sessions/
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ arch-to-dev-handover.md    # Architect â†’ Developer
â”‚   â”œâ”€â”€ arch-to-qa-handover.md     # Architect â†’ QA
â”‚   â””â”€â”€ dev-to-qa-handover.md      # Developer â†’ QA
â”‚
â”œâ”€â”€ architect/
â”‚   â”œâ”€â”€ 0xXX-architecture-design.md
â”‚   â””â”€â”€ 0xXX-walkthrough.md
â”‚
â”œâ”€â”€ developer/
â”‚   â””â”€â”€ 0xXX-impl-plan.md
â”‚
â””â”€â”€ qa/
    â”œâ”€â”€ 0xXX-test-checklist.md     # Architectåˆ›å»º
    â”œâ”€â”€ 0xXX-qa-ack.md             # QAç¡®è®¤
    â””â”€â”€ 0xXX-test-report.md        # æµ‹è¯•æ‰§è¡ŒåæŠ¥å‘Š
```

---

## ğŸš¨ å¸¸è§é”™è¯¯åŠé¿å…æ–¹æ³•

### âŒ é”™è¯¯1: åªåˆ—åŠŸèƒ½ï¼Œä¸ç»™æµ‹è¯•åœºæ™¯
**é—®é¢˜**: QAä¸çŸ¥é“æ€ä¹ˆæµ‹è¯•

**æ­£ç¡®åšæ³•**:
```markdown
âŒ "æµ‹è¯•WALåŠŸèƒ½"
âœ… "WALæµ‹è¯•åœºæ™¯:
   - å†™å…¥1000æ¡è®°å½•ï¼ŒéªŒè¯å…¨éƒ¨å¯è¯»å›
   - å†™å…¥è¿‡ç¨‹ä¸­killè¿›ç¨‹ï¼Œé‡å¯åéªŒè¯æ•°æ®å®Œæ•´
   - æ•…æ„æŸå1å­—èŠ‚ï¼ŒéªŒè¯CRCæ£€æµ‹å¤±è´¥"
```

### âŒ é”™è¯¯2: æ²¡æœ‰é¢„æœŸç»“æœ
**é—®é¢˜**: QAä¸çŸ¥é“ä»€ä¹ˆæ˜¯"é€šè¿‡"

**æ­£ç¡®åšæ³•**:
```markdown
âŒ "æµ‹è¯•æ¢å¤åŠŸèƒ½"
âœ… "æ¢å¤æµ‹è¯•:
   Input: 10,000æ¡WALè®°å½•
   Action: kill -9åé‡å¯
   Expected: æ¢å¤åè´¦æˆ·æ•°é‡=10,000, æ‰€æœ‰ä½™é¢æ­£ç¡®"
```

### âŒ é”™è¯¯3: å¿½ç•¥è¾¹ç¼˜æƒ…å†µ
**é—®é¢˜**: ç”Ÿäº§ç¯å¢ƒæš´éœ²bug

**æ­£ç¡®åšæ³•**:
```markdown
âœ… è¾¹ç¼˜æµ‹è¯•æ¸…å•:
   - ç©ºWALæ–‡ä»¶ (cold start)
   - å•æ¡è®°å½•
   - 100ä¸‡æ¡è®°å½• (æ€§èƒ½)
   - æŸåçš„WALæ–‡ä»¶
   - æŸåçš„Snapshotæ–‡ä»¶
```

---

## ğŸ“Š åä½œæ—¶é—´çº¿

```
                   Architect      Developer        QA
                      â”‚              â”‚             â”‚
Week 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Design       â”‚             â”‚
                      â”‚              â”‚             â”‚
Week 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Test List â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Review
                      â”‚              â”‚             â”‚
Week 2-3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚ Implement   â”‚ Prepare
                      â”‚              â”‚             â”‚
Week 3-4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚ Handover â”€â”€â”€â–º Execute
                      â”‚              â”‚             â”‚
Week 4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚              â”‚             â”‚ Report
```

**å…³é”®**: QAåœ¨Week 1å°±è·å¾—æµ‹è¯•æ¸…å•ï¼Œå¯ä»¥å¹¶è¡Œå‡†å¤‡

---

## ğŸ’¡ æœ€ä½³å®è·µç¤ºä¾‹

### ä¼˜ç§€çš„Test Checklistç¤ºä¾‹

```markdown
# 0x0D WAL & Snapshot QA Test Checklist

## Phase 1: UBSCore WAL & Snapshot

### 1.1 WAL Writer Tests

#### Test 1.1.1: Entry Type Coverage
- [ ] **Order** entryå†™å…¥æˆåŠŸ
- [ ] **Cancel** entryå†™å…¥æˆåŠŸ
- [ ] **Deposit** entryå†™å…¥æˆåŠŸ
- [ ] **Withdraw** entryå†™å…¥æˆåŠŸ
- [ ] seq_idä¸¥æ ¼é€’å¢

**éªŒè¯æ–¹æ³•**:
\`\`\`bash
cargo test ubscore_wal_entry_types
\`\`\`

### 1.2 Crash Safety

#### Test 1.2.1: Mid-Write Crash
- [ ] å†™å…¥è¿‡ç¨‹ä¸­kill -9
- [ ] é‡å¯åè¯»å–ä¸crash
- [ ] æœ€åå®Œæ•´è®°å½•å¯è¯»

**éªŒè¯æ–¹æ³•**:
\`\`\`bash
./scripts/test_ubscore_crash_safety.sh
\`\`\`
```

---

## ğŸ“ æ€»ç»“

### Architectçš„èŒè´£
1. **æå‰æä¾›æµ‹è¯•æ¸…å•** - ä¸è¦ç­‰Developerå®ç°å®Œ
2. **å…·ä½“çš„æµ‹è¯•åœºæ™¯** - ä¸åªæ˜¯åŠŸèƒ½åˆ—è¡¨
3. **æ˜ç¡®çš„é¢„æœŸç»“æœ** - ä»€ä¹ˆæ˜¯"é€šè¿‡"

### QAçš„èŒè´£
1. **ä¸»åŠ¨è¡¥å……åœºæ™¯** - ä»QAè§†è§’æ·»åŠ æµ‹è¯•
2. **æå‰æ²Ÿé€šé—®é¢˜** - ä¸ç­‰åˆ°æ‰§è¡Œæ—¶æ‰å‘ç°
3. **ç¡®è®¤æµ‹è¯•èŒƒå›´** - åˆ›å»ºqa-ack.md

### åä½œçš„å…³é”®
**å¹¶è¡Œå·¥ä½œ + æ˜ç¡®æ ‡å‡† + åŒå‘ç¡®è®¤**

---

*Best Practices Guide v1.0*  
*Created: 2025-12-26*
